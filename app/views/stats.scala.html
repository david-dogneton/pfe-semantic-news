@()(implicit user: Option[Utilisateur], lang: Lang)
@main(Messages("stats.title"))("statistiques") {

<div ng-controller="StatsRenderer" class="ui grid">
    <div class="sixteen wide column">
        <div class="ui piled segment">
            <h2>Statistiques</h2>
        </div>
    </div>
    <div class="three wide column">
        <h3 class="ui header">Période</h3>
        <div ng-show="liste['items'].length==0">
            <p>Filtre en cours:</p>
            <div  class="ui teal label">
                {{currentPeriode}}
            </div>
        </div>

        <div  ng-show="liste['items'].length>0" class="ui secondary vertical pointing menu">
            <a ng-click="changePeriode('day')" ng-class="{'active item': periode=='day', 'item': periode!='day'}">
                Aujourd'hui
            </a>
            <a ng-click="changePeriode('week')" ng-class="{'active item': periode=='week', 'item': periode!='week'}">
                Cette Semaine
            </a>
            <a ng-click="changePeriode('month')" ng-class="{'active item': periode=='month', 'item': periode!='month'}">
                Ce mois-ci
            </a>
            <a ng-click="changePeriode('all')" ng-class="{'active item': periode=='all', 'item': periode!='all'}">
                Depuis le début
            </a>
        </div>
    </div>
    <div class="ten wide column">
        <div ng-show="liste['items'].length==0" class="ui segment" style="padding-top:50px">
            Récupération des données...
            <div class="ui active center loader"></div>
        </div>
        <div class="ui divided ordered list">
            <div class="item" ng-repeat="item in liste['items'] | limitTo:limite ">
                <div class="right floated">
                    <img ng-show="{{item['image'].length>0}}" class="ui image" style="width:60px; margin-left:20px" src="{{item['image']}}" alt=""/>
                    <img ng-show="{{item['image'].length==0}}" class="ui image" style="width:60px; margin-left:20px" src='@routes.Assets.at("images/no-image.jpg")'/>
                </div>

                <div class="content">
                    <div class="header">
                        <a href="/entite/{{item['id']}}">{{item['nom']}}</a>
                        <div class="tiny teal ui button" style="cursor:inherit">{{item['nombre']}}</div>
                    </div>
                </div>

            </div>
        </div>
        <div class="fluid ui button" ng-click="limite=limite+100" ng-show="limite<liste['items'].length">Plus</div>
    </div>
    <div class="three wide column">
        <h3 class="ui header">Type d'entité</h3>
        <div ng-show="liste['items'].length==0">
           <p>Filtre en cours:</p>
            <div  class="ui teal label">
                {{currentType}}
            </div>
        </div>
        <div ng-show="liste['items'].length>0" class="ui secondary vertical menu">
            <a ng-click="changeType(-1, 'Tout')" ng-class="{'active item': idType==-1, 'item': idType!=-1}">
                Tout
            </a>

            <a ng-repeat="type in types['items']" ng-click="changeType(type['id'], type['nom'])" ng-class="{'active item': idType==type['id'], 'item': idType!=type['id']}" >
                {{type['nom']}}
            </a>

        </div>
    </div>

</div>

</div>
<link rel='stylesheet' media="screen" href='@routes.Assets.at("stylesheets/index.css")'>
<script src='@routes.Assets.at("javascripts/moment-with-langs.js")' type="text/javascript"></script>
<script src='@routes.Assets.at("javascripts/angular.min.js")' type="text/javascript"></script>
<script src='@routes.Assets.at("javascripts/stats.js")' type="text/javascript"></script>
}