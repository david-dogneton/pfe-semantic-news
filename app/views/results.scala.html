@(entites: List[Entite], articles: List[Article], search:String)(implicit user: Option[Utilisateur], lang: Lang)
@main(Messages("results.title"))("entité") {

<div class="ui grid">
    <div class="thirteen wide column">
        <div class="ui piled segment" ng-controller="GestionEntites">
            <h2>Entités pour "@search"</h2>
            <p>@entites.length résultat(s)</p>
            <div class="ui seven items">
                @for(entite <- entites) {
                <div class="item" >
                    @user match {
                        case Some(usr) => {
                            <a class="like ui corner label">
                                <i class="like icon"></i>
                            </a>
                        }
                        case None => {

                        }
                    }
                    <a href="/entite/@entite.id">
                        <div class="image">
                            @sparql.SparqlQueryExecuter.getImageFromView(entite.url) match{
                            case "noPic" =>   {<img style="height:inherit" src='@routes.Assets.at("images/no-image.jpg")'>}
                            case _ =>  {<img  style="height:inherit" src="@sparql.SparqlQueryExecuter.getImageFromView(entite.url)" alt=""> }
                            }
                        </div>
                    </a>
                    <div class="content">
                        <div class="name"><a href="/entite/@entite.id">@sparql.SparqlQueryExecuter.getNameFromView(entite.url)</a></div>
                        <p class="description"></p>
                        <div class="extra">
                            <i class="heart icon"></i> @AppreciationEntite.getNbCoeurs(entite) | <i class="pencil icon"></i> @Tag.getNombreArticlesLies(entite)
                        </div>
                    </div>
                </div>
                }
            </div>
        </div>

        <h2>Articles pour "@search"</h2>
        <p>@articles.length résultat(s)</p>
        <div class="ui six items">
            @for(article <- articles) {
            <div class="item" style="min-height: 450px;">
                @user match {
                    case Some(usr) => {
                        <a class="like ui corner label">
                            <i class="like icon"></i>
                        </a>
                    }
                    case None => {

                    }
                }

                <a href="@article.url" target="_blank">
                    <div class="image">
                        @article.image match{
                        case "" => {<img src='@routes.Assets.at("images/no-image.jpg")'>}
                        case _ => {<img src='@article.image'>}
                        }
                        <div class="ui ribbon label" style="margin-top:5px">@article.site.typeSite</div>
                    </div>
                </a>

                <div class="meta" style="float:none">@article.date.dayOfMonth().get() / @article.date.monthOfYear().get() / @article.date.year().get()
                    - @article.date.hourOfDay().get() h @article.date.minuteOfHour().get()</div>
                <div class="content">
                    <a href="@article.url" target="_blank">
                        <div class="name">@article.titre</div>
                    </a>
                    <p style="font-weight:bold">@article.site.nom</p>
                    <p class="description">@article.description</p>
                    <div class="extra">
                        <i class="unhide icon"></i> @article.consultationsJour |
                        <i class="heart icon"></i> @article.nbCoeurs
                    </div>
                    <p>
                        <a href="/displayart/@article.id"><i class="add icon"></i>Voir plus</a>
                    </p>
                    <!--     <p>

                             <span style="padding:2px;margin:2px;font-size:11px" class="ui label"><a href="/entite/idDuTag">Nom Tag</a></span>

                         </p>-->
                    <!-- <p >
                         <a href="/displayart/idArticle"> <i class="add icon"></i>plusieurs articles liés à ce sujet.</a>
                     </p>
                     <p >
                         <a href="/displayart/idArticle"> <i class="add icon"></i>1 article lié à ce sujet.</a>
                     </p>
                     <p >
                         <i class="add icon"></i>Pas d'article lié à ce sujet.
                     </p>-->
                </div>
            </div>
            }
        </div>
    </div>
    <div ng-controller="NewsRenderer" class="three wide column">
        <h3 class="ui header">Top du jour</h3>
        <div ng-show="tops['items'].length==0" class="ui segment" style="padding:20px">
            <div  class="ui active center loader"></div>
        </div>
        <div class="ui divided ordered list">
            <div class="item" id="top" ng-repeat="item in tops['items'] | orderBy:'nombre':true">
                <!--<img ng-show="{{item['image']!='noPic'}}" class="ui avatar image" style="margin-right:0" src="{{item['image']}}" alt="">-->
                <div class="content">
                    <a class="ui mini hover teal button" href="/entite/{{item['id']}}">{{item['nom']}} ({{item['nombre']}})</a>
                    <div class="description">{{item['type']}}</div>
                </div>
                <div class="description">{{item['type']}}</div>
            </div>
        </div>
    </div>
</div>
</div>
<link rel='stylesheet' media="screen" href='@routes.Assets.at("stylesheets/index.css")'>
<script src='@routes.Assets.at("javascripts/moment-with-langs.js")' type="text/javascript"></script>
<script src='@routes.Assets.at("javascripts/angular.min.js")' type="text/javascript"></script>
<script src='@routes.Assets.at("javascripts/recherche.js")' type="text/javascript"></script>
}