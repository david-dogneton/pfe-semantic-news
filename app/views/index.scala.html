@()(implicit user: Option[Utilisateur], lang: Lang)
@main(Messages("index.title"))("accueil") {
<div class="ui grid" ng-controller="NewsRenderer">
    <div class="two wide column">
        <div class="sixteen wide column">
            <h3 class="ui header">Domaine</h3>
            <a style="cursor:pointer" ng-click="filtrage.domaine=''">Tout</a>
            <div class="sixteen wide column" ng-repeat="domaine in domaines['items']" style="font-family: 'Source Sans Pro'">
                <a style="cursor:pointer" ng-click="filtrage.domaine=domaine['nom']">{{domaine['nom']}}</a>
            </div>
        </div>
    </div>
    <div class="eleven wide column">
        <div ng-show="news['items'].length==0" class="ui segment" style="padding-top:50px">
            Récupération des articles les plus récents...
            <div class="ui active center loader"></div>
        </div>
        <div class="ui five items">
            <div class="item" ng-repeat="item in news['items'] | filter:filtrage | orderBy:'consultationsJour':true | limitTo:limite">
                <a class="like ui corner label">
                    <i class="like icon"></i>
                </a>

                <a href="{{item['url']}}" target="_blank">
                    <div class="image">
                        <img src="{{item['image']}}">
                        <div class="ui ribbon label" style="margin-top:5px">{{item['domaine']}}</div>
                    </div>
                </a>

                <div class="meta" style="float:none">{{item['date'] | fromNow}}</div>
                <div class="content">
                    <a href="{{item['url']}}" target="_blank">
                        <div class="name">{{item['titre']}}</div>
                    </a>
                    <p style="font-weight:bold">{{item['site']}}</p>
                    <p class="description">{{item['description']}}</p>
                    <div class="extra">
                        <i class="unhide icon"></i> {{item['consultationsJour']}} |
                        <i class="heart icon"></i> {{item['coeurs']}} |
                        <i class="star icon"></i> {{item['note']}}
                    </div>
                </div>

                <p>
                    <i class="tags icon"></i><!--
                        <span style="padding:2px;margin:2px;font-size:11px"  class="ui label">-->
                              <form style="margin:0px" ng-repeat="tag in item['tags']" action="@routes.Application.entite" method="POST">
                                  <input type="hidden" name="urlarticle" value="{{tag.url}}">
                                  <input class="ui mini button" style="padding:2px;margin:2px;font-size:11px" type="submit" value="{{tag.nom}}">
                              </form>
                       <!-- </span>-->
                </p>
                <p ng-show="item['lies']>1">
                    <a href=""> <i class="add icon"></i>{{item['lies']}} articles liés à ce sujet.</a>
                </p>
                <p ng-show="item['lies']==1">
                    <a href=""> <i class="add icon"></i>{{item['lies']}} article lié à ce sujet.</a>
                </p>
                <p ng-show="item['lies']==0">
                    <i class="add icon"></i>Pas d'article lié à ce sujet.
                </p>
            </div>
        </div>
        <div class="fluid ui button" ng-click="limite=limite+10" ng-show="limite<(news['items']| filter:filtrage).length">Plus</div>
    </div>
    <div class="three wide column">
        <h3 class="ui header">Top du jour</h3>
        <div ng-show="tops['items'].length==0" class="ui segment" style="padding:20px">
            <div  class="ui active center loader"></div>
        </div>
        <div class="ui divided ordered list">
            <div class="item" id="top" ng-repeat="item in tops['items'] | orderBy:'nombre':true">
                <!--<img ng-show="{{item['image']!='noPic'}}" class="ui avatar image" style="margin-right:0" src="{{item['image']}}" alt="">-->
                <div class="content">
                    <form action="@routes.Application.entite" method="POST">
                        <input type="hidden" name="urlarticle" value="{{item['url']}}">
                        <input class="ui mini hover teal button" type="submit" value="{{item['nom']}} ({{item['nombre']}})">
                    </form>
                    <div class="description">{{item['type']}}</div>
                </div>
            </div>
        </div>
    </div>
</div>
<link rel='stylesheet' media="screen" href='@routes.Assets.at("stylesheets/index.css")'>
<script src='@routes.Assets.at("javascripts/moment-with-langs.js")' type="text/javascript"></script>
<script src='@routes.Assets.at("javascripts/angular.min.js")' type="text/javascript"></script>
<script src='@routes.Assets.at("javascripts/index.js")' type="text/javascript"></script>
}